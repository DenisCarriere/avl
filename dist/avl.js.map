{"version":3,"file":"avl.js","sources":["../src/node.js","../src/index.js"],"sourcesContent":["const { max } = Math;\n\nexport function node (key, value) {\n  return { left: null, right: null, height: null, key, value };\n}\n\n\nexport function leftHeight (node) {\n  return node.right ? node.right.height : -1;\n}\n\n\nexport function rightHeight (node) {\n  return node.left ? node.left.height : -1;\n}\n\n\n/**\n *   a                             b\n *  / \\                           / \\\n * c   b   -> rotate left a ->   a   e\n *    / \\                       / \\\n *   d   e                     c   d\n * @param  {node}\n * @return {node}\n */\nexport function rotateLeft (node) {\n  var other    = node.right;\n  node.right   = other.left;\n  other.left   = node;\n\n  node.height  = Math.max(leftHeight(node), rightHeight(node)) + 1;\n  other.height = Math.max(rightHeight(other), node.height) + 1;\n  return other;\n}\n\n\n/**\n *     b                          a\n *    / \\                        / \\\n *   a   e -> rotate right b -> c   b\n *  / \\                            / \\\n * c   d                          d   e\n * @param  {node}\n * @return {node}\n */\nexport function rotateRight (node) {\n  var other    = node.left;\n  node.left    = other.right;\n  other.right  = node;\n\n  node.height  = Math.max(leftHeight(node), rightHeight(node)) + 1;\n  other.height = Math.max(leftHeight(other), node.height) + 1;\n  return other;\n}\n","import {\n  node,\n  rotateLeft, rotateRight,\n  leftHeight, rightHeight\n} from './node';\n\n\nconst UNBALANCED_LEFT           = -2;\nconst SLIGHTLY_UNBALANCED_LEFT  = -1;\nconst UNBALANCED_RIGHT          =  2;\nconst SLIGHTLY_UNBALANCED_RIGHT =  1;\n\nconst DEFAULT_COMPARE = (a, b) => (a > b ? 1 : a < b ? -1 : 0);\n\n/**\n * @param  {node} node\n * @return {number}\n */\nfunction balanceFactor(node) {\n  return (node.right ? node.right.height : -1) -\n         (node.left  ? node.left.height  : -1);\n}\n\n\nexport default class AVL {\n\n  constructor (comparator = DEFAULT_COMPARE) {\n    this._root = null;\n    this._size = 0;\n    this._compare = comparator;\n  }\n\n  get size ()    { return this._size; }\n  get isEmpty () { return this._size === 0; }\n\n  /**\n   * @param {*} key\n   * @param {*} value\n   */\n  insert (key, value) {\n    this._root = this._insert(this._root, key, value);\n    this._size++;\n  }\n\n\n  // _insert (root, key, value) {\n  //   if (root === null) return { key, value, left: null, right: null, height: null };\n\n  //   var cmp = this._compare(key, root.key);\n  //   if (cmp < 0) {\n  //     root.left  = this._insert(root.left, key, value);\n  //   } else if (cmp > 0) { //allow repeating keys?\n  //     root.right = this._insert(root.right, key, value);\n  //   } else {\n  //     // It's a duplicate so insertion failed, decrement size to make up for it\n  //     this._size--;\n  //     return root;\n  //   }\n\n  //   // Update height and rebalance tree\n  //   var lh  = root.right ? root.right.height : -1;\n  //   var rh  = root.left  ? root.left.height  : -1;\n  //   root.height = Math.max(lh, rh) + 1;\n  //   //var balance = balanceFactor(root);\n  //   var balance = lh - rh;\n\n  //   if (balance === UNBALANCED_LEFT) {\n  //     if (this._compare(key, root.left.key) < 0) { // left left\n  //       root = rotateRight(root);\n  //     } else { // Left right case\n  //       root.left = rotateLeft(root.left);\n  //       return rotateRight(root);\n  //     }\n  //   } else\n\n  //   if (balance === UNBALANCED_RIGHT) {\n  //     if (this._compare(key, root.right.key) > 0) { // right right\n  //       root = rotateLeft(root);\n  //     } else { // Right left case\n  //       root.right = rotateRight(root.right);\n  //       return rotateLeft(root);\n  //     }\n  //   }\n\n  //   return root;\n  // }\n\n\n  _insert (root, key, value) {\n    var newNode = { key, value, left: null, right: null, height: null };\n    if (root === null) return newNode;\n\n    var compare = this._compare;\n    var cmp, parent, result;\n    var subtree = root;\n    var toBalance = [];\n\n    while (subtree) {\n      //parent = subtree;\n      toBalance.push(subtree);\n      cmp    = compare(key, subtree.key);\n\n      if (cmp < 0) {\n        if (subtree.left === null)  {\n          subtree.left = newNode;\n          subtree      = newNode;\n          toBalance.pop();\n        }\n        subtree = subtree.left; // null will stop the loop\n      } else if (cmp > 0) {\n        if (subtree.right === null) {\n          subtree.right = newNode;\n          subtree       = newNode;\n          toBalance.pop();\n        }\n        subtree = subtree.right; // null will stop the loop\n      } else {\n        this._size--;\n        subtree = null;\n      }\n    }\n\n\n    while (toBalance.length !== 0) {\n      subtree = toBalance.pop();\n      result = this._balance(subtree, key);\n      if (subtree === root) root = result;\n    }\n\n    return root;\n  }\n\n\n  _balance(root, key) {\n    // Update height and rebalance tree\n    var lh  = root.right ? root.right.height : -1;\n    var rh  = root.left  ? root.left.height  : -1;\n    root.height = Math.max(lh, rh) + 1;\n    //var balance = balanceFactor(root);\n    var balance = lh - rh;\n\n    if (balance === UNBALANCED_LEFT) {\n      if (this._compare(key, root.left.key) < 0) { // left left\n        root = rotateRight(root);\n      } else { // Left right case\n        root.left = rotateLeft(root.left);\n        return rotateRight(root);\n      }\n    } else\n\n    if (balance === UNBALANCED_RIGHT) {\n      if (this._compare(key, root.right.key) > 0) { // right right\n        root = rotateLeft(root);\n      } else { // Right left case\n        root.right = rotateRight(root.right);\n        return rotateLeft(root);\n      }\n    }\n\n    return root;\n  }\n\n\n  remove (key) {\n    this._root = this._remove(this._root, key);\n    this._size--;\n  }\n\n\n  /**\n   * @param  {node} root\n   * @param  {*}    key\n   * @return {node}\n   */\n  _remove (root, key) {\n    if (root === null) {  // BST deletion\n      this._size++;\n      return root;\n    }\n\n    var cmp = this._compare(key, root.key);\n    if (cmp < 0) {\n      // The key to be deleted is in the left sub-tree\n      root.left = this._remove(root.left, key);\n    } else if (cmp > 0) {\n      // The key to be deleted is in the right sub-tree\n      root.right = this._remove(root.right, key);\n    } else if (cmp === 0) {\n      // root is the node to be deleted\n      if (!root.left && !root.right)      root = null;\n      else if (!root.left && root.right)  root = root.right;\n      else if (root.left  && !root.right) root = root.left;\n      else {\n        // Node has 2 children, get the in-order successor\n        var successor = minNode(root.right);\n        root.key   = successor.key;\n        root.right = this._remove(root.right, successor.key);\n      }\n    }\n\n    if (root === null) return root;\n\n    // Update height and rebalance tree\n    root.height = Math.max(leftHeight(root), rightHeight(root)) + 1;\n    var balance = balanceFactor(root);\n\n    if (balance === UNBALANCED_LEFT) {\n      var leftBalance = balanceFactor(root.left);\n      // Left left case\n      if (leftBalance === 0 ||\n          leftBalance === SLIGHTLY_UNBALANCED_LEFT) {\n        return rotateRight(root);\n      }\n\n      // Left right case\n      if (leftBalance === SLIGHTLY_UNBALANCED_RIGHT) {\n        root.left = rotateLeft(root.left);\n        return rotateRight(root);\n      }\n    }\n\n    if (balance === UNBALANCED_RIGHT) {\n      var rightBalance = balanceFactor(root.right);\n      // Right right case\n      if (rightBalance === 0 ||\n          rightBalance === SLIGHTLY_UNBALANCED_RIGHT) {\n        return rotateLeft(root);\n      }\n      // Right left case\n      if (rightBalance === SLIGHTLY_UNBALANCED_LEFT) {\n        root.right = rotateRight(root.right);\n        return rotateLeft(root);\n      }\n    }\n\n    return root;\n  }\n\n\n  /**\n   * @param {*} key\n   * @return {node}\n   */\n  findNode (key) {\n    return this._findNode(this._root, key);\n  }\n\n\n  find (key) {\n    var node = this._findNode(this._root, key);\n    return node ? node.value : null;\n  }\n\n\n  /**\n   * Non-recursive search\n   * @param  {node} root\n   * @param  {*}    key\n   * @return {node}\n   */\n  _findNode (root, key) {\n    if (this._root === null) return null;\n    if (key === root.key)    return root;\n\n    var subtree = root, cmp;\n    while (subtree) {\n      cmp = this._compare(key, subtree.key);\n      if      (cmp === 0) return subtree;\n      else if (cmp < 0)   subtree = subtree.left;\n      else                subtree = subtree.right;\n    }\n\n    return subtree;\n  }\n\n\n  /**\n   * @param  {*}\n   * @return {boolean}\n   */\n  contains (key) {\n    return this._root === null ? false : (this._findNode(this._root, key) !== null);\n  }\n\n\n  /**\n   * @return {*}\n   */\n  min () {\n    return minNode(this._root).key;\n  }\n\n\n  /**\n   * @return {*}\n   */\n  max () {\n    return maxNode(this._root).key;\n  }\n\n\n  pop () {\n    var min = this.min();\n    this._remove(this._root, min);\n    return min;\n  }\n\n\n  forEach(fn) {\n    var current = this._root;\n    var s = [], done = false, i = 0;\n\n    while (!done) {\n      // Reach the left most Node of the current Node\n      if (current) {\n        // Place pointer to a tree node on the stack\n        // before traversing the node's left subtree\n        s.push(current);\n        current = current.left;\n      } else {\n        // BackTrack from the empty subtree and visit the Node\n        // at the top of the stack; however, if the stack is\n        // empty you are done\n        if (s.length > 0) {\n          current = s.pop();\n          fn(current, i++);\n\n          // We have visited the node and its left\n          // subtree. Now, it's right subtree's turn\n          current = current.right;\n        } else done = true;\n      }\n    }\n    return this;\n  }\n\n}\n\n\n/**\n * @param  {node} root\n * @return {node}\n */\nfunction minNode (root) {\n  var node = root;\n  while (node.left) node = node.left;\n  return node;\n}\n\n\n/**\n * @param  {node} root\n * @return {node}\n */\nfunction maxNode (root) {\n  var node = root;\n  while (node.right) node = node.right;\n  return node;\n}\n"],"names":["const","node","this"],"mappings":"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"}